Author: Joseph Lee
E-Mail: fdlixiaojun@gmail.com

FTP协议，Telnet和Rlogin协议，SMTP协议

文件传输协议FTP

首先要考虑的问题：
file transfer和file access的区别：前者由FTP等提供，后者由NFS等提供。
要考虑客户机和服务器运行的是不同的操作系统和使用不同的文件结构。

特点：两个TCP连接，控制连接和数据连接

		客户
        +-----------------+
	|    用户接口     |
        +-----------------+
	|   协议解析器    | <---控制连接--->
        +-----------------+
        | 用户数据传输功能| <---数据连接--->
        +-----------------+

要求（以实际实现说明）：
    选择文本类型
        ASCII（默认）：本地和远端要做转化，每行有一个回车一个换行
	BINARY：连续的比特流
    格式控制
        非打印：文件中不含垂直格式信息
    结构
        文件结构：文件被认为是一个连续的字节流，不存在内部结构
    传输方式
        流方式：文件以字节流传输，对于文件结构，发方在文件尾提示关闭数据连接

FTP命令
    命令和应答在客户和服务器的控制连接上以NVT ASCII码形式传送。这要求在每行结尾
    都要返回CR，LF对。也就是每个命令和英达。
    这些命令都是3个或4个字节的大写ASCII字符，其中一些带选项参数。从客户向服务器
    发出的命令大概30多种。
    用户命令和控制链接上的命令有的是一对一的，有的是一对多的。
FTP应答
    应答都是ASCII码形式的3位数字，并跟有报文选项。原因是软件系统需要根据数字代
    码来决定如何英达，而选项串是面向人工处理的。

连接管理
    数据连接三大用途：从客户向服务器发送一个文件，从服务器向客户发送一个文件，
    从服务器向客户发送文件或目录列表。

谁负责打开数据连接和选择数据连接端口
一般过程为：客户在客户端主机上为所在数据连接端选择一个临时端口号，客户从该端口
发布一个被动的打开；客户使用PORT命令从控制连接上把端口号发向服务器；服务器在控
制连接上接收端口号，并想客户端主机的端口发布一个主动的打开。服务器的数据连接端
一直使用端口20。
服务器总是执行数据连接的主动打开，通常服务器也执行数据连接的主动关闭，除非当客
户向服务器发送流形式的文件时，需要客户来关闭连接（它给服务器一个文件结束的通知）

